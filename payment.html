<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Payment Page</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<style>
  body { background: linear-gradient(135deg, #ffecd2, #fcb69f); min-height:100vh; font-family: 'Segoe UI'; }
  .container-box { background:#fff; border-radius:20px; padding:30px; box-shadow:0 10px 25px rgba(0,0,0,0.1); }
  .title { font-weight:700; font-size:26px; }
  .summary-card { background:#f8f9ff; border-radius:15px; padding:20px; }
  .pay-btn { background:#4b7bec; border:none; font-size:18px; padding:12px 20px; border-radius:12px; }
  .pay-btn:hover { background:#3867d6; }
</style>
</head>
<body>
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-7">
      <div class="container-box mb-4">
        <div class="title mb-3">Customer Payment Details</div>

        <label class="form-label">Full Name</label>
        <input class="form-control mb-3" placeholder="Enter your full name" />

        <label class="form-label">Contact Number</label>
        <input class="form-control mb-3" placeholder="e.g. 054xxxxxxx" />

        <label class="form-label">Email</label>
        <input type="email" class="form-control mb-3" placeholder="you@example.com" />

        <label class="form-label">GPS / Digital Address</label>
        <input class="form-control mb-3" placeholder="GA-123-4567" />

        <label class="form-label">Pickup or Delivery</label>
        <select id="pickupDelivery" class="form-control mb-3">
          <option value="pickup">Come for the items yourself at the store</option>
          <option value="delivery">Deliver Items</option>
        </select>

        <div id="regionSection" style="display:none;">
          <label class="form-label">Select Region</label>
          <select id="region" class="form-control mb-3">
            <option value="accra">In Accra - $50</option>
            <option value="outside">Outside Accra - $120</option>
          </select>
        </div>

        <label class="form-label">Payment Method</label>
        <input class="form-control mb-4" value="Cash On Delivery" disabled />

        <button class="btn pay-btn w-100" id="calculateBtn">Calculate Total</button>
      </div>
    </div>

    <div class="col-lg-5">
      <div class="summary-card">
        <h5 class="mb-3">Order Summary</h5>

        <div id="cartItems"></div>
        <hr>

        <div class="d-flex justify-content-between mb-2">
          <span>Subtotal</span>
          <strong id="subtotal">$0.00</strong>
        </div>

        <div class="d-flex justify-content-between mb-2">
          <span>Delivery</span>
          <strong id="deliveryFee">$0.00</strong>
        </div>

        <hr>
        <div class="d-flex justify-content-between mb-2">
          <span style="font-size:18px; font-weight:700;">Grand Total</span>
          <span style="font-size:20px; font-weight:700;" id="grandTotal">$0.00</span>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
// Fetch cart from localStorage (from index.html)
function loadCart() {
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  let container = document.getElementById('cartItems');
  let subtotal = 0;
  container.innerHTML = '';

  cart.forEach(item => {
    subtotal += item.price * item.quantity;
    container.innerHTML += `
      <div class="d-flex justify-content-between mb-2">
        <span>${item.name} Ã— ${item.quantity}</span>
        <strong>$${(item.price * item.quantity).toFixed(2)}</strong>
      </div>`;
  });

  document.getElementById('subtotal').innerText = `$${subtotal.toFixed(2)}`;
  return subtotal;
}

// Delivery section toggle
const pickupDelivery = document.getElementById('pickupDelivery');
pickupDelivery.addEventListener('change', function() {
  document.getElementById('regionSection').style.display = this.value === 'delivery' ? 'block' : 'none';
});

// Calculate totals
const calculateBtn = document.getElementById('calculateBtn');
calculateBtn.addEventListener('click', function() {
  let subtotal = loadCart();
  let delivery = 0;

  if (pickupDelivery.value === 'delivery') {
    let region = document.getElementById('region').value;
    delivery = region === 'accra' ? 50 : 120;
  }

  document.getElementById('deliveryFee').innerText = `$${delivery.toFixed(2)}`;
  document.getElementById('grandTotal').innerText = `$${(subtotal + delivery).toFixed(2)}`;
});

// Load cart on page enter
loadCart();
</script>

</body>
</html>